{% extends 'base/base_site.html' %}
{% block content_header %}
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
        任务管理器
      </h1>
        </h1>
        <ol class="breadcrumb">
        <li><a href="/begin"><i class="fa fa-dashboard"></i>首页</a></li>
        <li class="active">任务管理器</li>
      </ol>
    </section>
{% endblock %}
{% block content %}
    <div class="box box-solid">
        <!-- /.box-header -->
        <div class="box-body">
        <!-- /.box-body -->
            <div class="box-body">
              <table id="task" class="table table-bordered table-hover">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>TASK_ID</th>
                    <th>设备类型</th>
                    <th>标签</th>
                    <th>操作</th>
                    <th>任务名称</th>
                    <th>开始执行时间</th>
                    <th>结束执行时间</th>
                    <th>执行结果</th>
                    <th>执行时间(秒)</th>
                    <th>任务状态</th>
                </tr>
                </thead>
                {% for my_task in my_task_list %}
                 <tr>
                  <td>{{ my_task.id}} </td>
                 <td>{{ my_task.task_id}} </td>
                 <td>{{ my_task.server_type }} </td>
                 <td>{{ my_task.tags}} </td>
                 <td>{{ my_task.oper_type }} </td>
                  <td>{{ my_task.task_name }} </td>
                  <td>{{ my_task.start_time }} </td>
                  <td>{{ my_task.end_time }} </td>
                   <td>{{ my_task.result }} </td>
                   <td>{{ my_task.runtime }} </td>
                  <td><span class="label  label-{{ my_task.state_color }}">{{ my_task.state }}</span></td>
                 </tr>
                 {% endfor %}
              </table>
            </div>
      </div>
      </div>
{% endblock %}

{% block javascripts %}
<script>
 $('#task').DataTable({
		autoWidth:true,////不开启自动宽度，用bootstrap的自适应去调整
		"lengthMenu": [10, 20, 50],//表格行数选择框内数目 显示2条,4条,20条,50条
		"displayLength": 10,//默认的显示行数 (也就是每页显示几条数据)
        "order": [0,'desc'],
	    "language": {//自定义语言提示
	    	"processing": "处理中...",
	        "lengthMenu": "显示 _MENU_ 项结果",
	        "zeroRecords": "没有找到相应的结果",
	        "info": "第 _START_ 至 _END_ 行，共 _TOTAL_ 行",
	        "infoEmpty": "第 0 至 0 项结果，共 0 项",
	        "infoFiltered": "(由 _MAX_ 项结果过滤)",
	        "infoPostFix": "",
	        "url": "",
	        "thousands": "'",
	        "emptyTable": "表中数据为空",
	        "loadingRecords": "载入中...",
	        "infoThousands": ",",
	        "paginate": {
	            "first": "首页",
	            "previous": "上页",
	            "next": "下页",
	            "last": "末页"
	        }
	    }

	});
</script>

{% endblock %}